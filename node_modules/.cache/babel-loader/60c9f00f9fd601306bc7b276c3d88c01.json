{"ast":null,"code":"import _classCallCheck from \"/home/divyas/mindfire-assignment/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/divyas/mindfire-assignment/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/divyas/mindfire-assignment/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/divyas/mindfire-assignment/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/divyas/mindfire-assignment/src/views/components/Profile/ProfilePictureUpload.js\";\nimport React, { Component } from \"react\";\nimport { Col, Row, Jumbotron, Label, Input, Modal, ModalBody, ModalHeader } from 'reactstrap';\nimport HttpTransferService from \"../.././../utils/httptransfer\";\nimport constant from '../../../constants/constant';\nimport AuthenticationService from '../../../utils/authentication';\nvar httptransfer = new HttpTransferService();\nvar authentication = new AuthenticationService();\n\nvar UploadProfilePicture = /*#__PURE__*/function (_Component) {\n  _inherits(UploadProfilePicture, _Component);\n\n  var _super = _createSuper(UploadProfilePicture);\n\n  function UploadProfilePicture(props) {\n    var _this;\n\n    _classCallCheck(this, UploadProfilePicture);\n\n    _this = _super.call(this, props);\n\n    _this.closePopup = function () {\n      _this.props.closePopup();\n    };\n\n    _this.state = {\n      photo: '',\n      user: 'USER'\n    };\n    return _this;\n  }\n\n  _createClass(UploadProfilePicture, [{\n    key: \"handleInputChange\",\n    value: function handleInputChange(e) {\n      this.setState({\n        photo: e.target.files[0]\n      });\n    }\n  }, {\n    key: \"uploadImage\",\n    value: function uploadImage(e) {\n      var file = document.querySelector('#fileItem').files['0'];\n      var params = {\n        type: 'USER',\n        file_name: file.name\n      };\n      var userInfo = authentication.getUserInfo();\n      var user_id = JSON.parse(userInfo).user_id;\n      httptransfer.uploadFileOnServer(params, constant.ENTITY_ID).then(function (result) {\n        if (result.status === 200) {\n          httptransfer.uploadFileOnAws(file, result.data.file_upload_url).then(function (res) {\n            if (res.status === 200) {\n              httptransfer.uploadImage({\n                file_path: result.data.file_path\n              }, constant.ENTITY_ID, user_id).then(function (response) {\n                if (response.status === 200) {}\n              });\n            }\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var closebtn = /*#__PURE__*/React.createElement(\"button\", {\n        className: \"close\",\n        onClick: this.closePopup,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 24\n        }\n      }, \"\\xD7\");\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Modal, {\n        size: \"md\",\n        isOpen: this.props.showPopup,\n        toggle: this.props.closePopup,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(ModalHeader, {\n        toggle: this.props.closePopup,\n        close: closebtn,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 14\n        }\n      }, \"Update Information\"), /*#__PURE__*/React.createElement(ModalBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-upload\",\n        \"aria-hidden\": \"true\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"position-relative form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"amount\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 37\n        }\n      }, \"File\"), /*#__PURE__*/React.createElement(Input, {\n        accept: \"image/*\",\n        type: \"file\",\n        id: \"fileItem\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 37\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-6 p-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.uploadImage,\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 33\n        }\n      }, \"Upload\")))));\n    }\n  }]);\n\n  return UploadProfilePicture;\n}(Component);\n\nexport default UploadProfilePicture;","map":{"version":3,"sources":["/home/divyas/mindfire-assignment/src/views/components/Profile/ProfilePictureUpload.js"],"names":["React","Component","Col","Row","Jumbotron","Label","Input","Modal","ModalBody","ModalHeader","HttpTransferService","constant","AuthenticationService","httptransfer","authentication","UploadProfilePicture","props","closePopup","state","photo","user","e","setState","target","files","file","document","querySelector","params","type","file_name","name","userInfo","getUserInfo","user_id","JSON","parse","uploadFileOnServer","ENTITY_ID","then","result","status","uploadFileOnAws","data","file_upload_url","res","uploadImage","file_path","response","closebtn","showPopup"],"mappings":"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","sourcesContent":["import  React, { Component } from \"react\";\nimport { Col, Row,Jumbotron, Label, Input,Modal, ModalBody, ModalHeader } from 'reactstrap';\nimport HttpTransferService from \"../.././../utils/httptransfer\";\nimport constant from '../../../constants/constant';\nimport AuthenticationService from '../../../utils/authentication';\nconst httptransfer = new HttpTransferService();\nconst  authentication = new AuthenticationService()\n\n\nclass UploadProfilePicture extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            photo : '',\n            user: 'USER',\n        }\n    }\n\n    closePopup = () => {\n      this.props.closePopup();\n    }\n\n    handleInputChange(e) {\n        this.setState({\n            photo: e.target.files[0]\n        })\n    }\n\n    uploadImage(e) {\n\n        const file=document.querySelector('#fileItem').files['0']\n\n        let params = {\n            type: 'USER', \n            file_name: file.name\n        }\n        var userInfo = authentication.getUserInfo()\n        var user_id = JSON.parse(userInfo).user_id\n        \n        httptransfer.uploadFileOnServer(params, constant.ENTITY_ID)\n            .then(result => {\n                if (result.status === 200) {\n                    httptransfer.uploadFileOnAws(file, result.data.file_upload_url)\n                    .then(res => {\n                        if (res.status === 200) {\n                            httptransfer.uploadImage({file_path: result.data.file_path}, constant.ENTITY_ID, user_id)\n                            .then(response => {\n                                if (response.status === 200) {\n                                }\n                            })\n                        }\n                    })\n                }\n            })\n        }\n\n    render() {\n      const closebtn = <button className=\"close\" onClick={this.closePopup}>&times;</button>;\n      return (\n        <div>\n          <Modal\n            size=\"md\"\n            isOpen={this.props.showPopup}\n            toggle={this.props.closePopup}\n          >\n             <ModalHeader toggle={this.props.closePopup} close={closebtn}>Update Information</ModalHeader>  \n            <ModalBody>\n                {/* <UserInfoUpdate   closeModal={this.closePopup} /> */}\n                <i className=\"fa fa-upload\" aria-hidden=\"true\"></i>\n\n                <div className=\"col-6\">\n                                <div className=\"position-relative form-group\">\n                                    <Label for=\"amount\">File</Label>\n                                    <Input accept=\"image/*\"  type=\"file\" id=\"fileItem\" required/>\n                                </div>\n                            </div>\n                            { <div className=\"col-6 p-4\">\n                                <button onClick={this.uploadImage} type=\"submit\" className=\"btn btn-primary\" >Upload</button>\n                            </div> \n                            }                 \n            </ModalBody>\n          </Modal>\n        </div>\n\n      );\n    }\n  }\nexport default UploadProfilePicture;"]},"metadata":{},"sourceType":"module"}