{"ast":null,"code":"import _regeneratorRuntime from \"/app/mindfire-assignment/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/app/mindfire-assignment/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/app/mindfire-assignment/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/app/mindfire-assignment/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/app/mindfire-assignment/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/app/mindfire-assignment/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/app/mindfire-assignment/src/views/components/SourceCustomer/User/transactionListing.js\";\nimport React, { Component } from \"react\";\nimport '../../../../views/modal.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus, faTrash, faPencilAlt } from '@fortawesome/free-solid-svg-icons';\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { Alert } from 'reactstrap';\nimport PropTypes from \"prop-types\";\nimport TransactionAddModal from \"./transactionAddModal\";\nimport AirportAddModal from \"./addAirportModal\";\n\nvar TransactionList = /*#__PURE__*/function (_Component) {\n  _inherits(TransactionList, _Component);\n\n  var _super = _createSuper(TransactionList);\n\n  function TransactionList(props) {\n    var _this;\n\n    _classCallCheck(this, TransactionList);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      transactions: [],\n      listOfAirports: [],\n      listOfAircrafts: [],\n      showPopup: false\n    };\n    return _this;\n  }\n\n  _createClass(TransactionList, [{\n    key: \"togglePopup\",\n    value: function togglePopup() {\n      this.setState({\n        showPopup: !this.state.showPopup\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.getTransactions();\n\n              case 2:\n                _context.next = 4;\n                return this.getAirportList();\n\n              case 4:\n                _context.next = 6;\n                return this.getAircraftList();\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"getTransactions\",\n    value: function () {\n      var _getTransactions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return fetch('http://438-ruby-on-rails.code2rock.mindfire-solutions.in/api/v1/transactions').then(function (response) {\n                  return response.json();\n                }).then(function (data) {\n                  return _this2.setState({\n                    transactions: data\n                  });\n                });\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function getTransactions() {\n        return _getTransactions.apply(this, arguments);\n      }\n\n      return getTransactions;\n    }()\n  }, {\n    key: \"getAirportList\",\n    value: function () {\n      var _getAirportList = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var airportList, airportListJson;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                airportList = [];\n                airportListJson = [];\n                _context3.next = 4;\n                return fetch('http://438-ruby-on-rails.code2rock.mindfire-solutions.in/api/v1/airports').then(function (response) {\n                  return response.json();\n                }).then(function (data) {\n                  return data.map(function (element) {\n                    airportListJson.push({\n                      label: element.name,\n                      value: element.id\n                    });\n                  });\n                });\n\n              case 4:\n                this.setState({\n                  listOfAirports: airportListJson\n                });\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getAirportList() {\n        return _getAirportList.apply(this, arguments);\n      }\n\n      return getAirportList;\n    }()\n  }, {\n    key: \"getAircraftList\",\n    value: function () {\n      var _getAircraftList = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var aircraftList, aircraftListJson;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                aircraftList = [];\n                aircraftListJson = [];\n                _context4.next = 4;\n                return fetch('http://438-ruby-on-rails.code2rock.mindfire-solutions.in/api/v1/aircrafts').then(function (response) {\n                  return response.json();\n                }).then(function (data) {\n                  return data.map(function (element) {\n                    aircraftListJson.push({\n                      label: element.airline,\n                      value: element.id\n                    });\n                  });\n                });\n\n              case 4:\n                this.setState({\n                  listOfAircrafts: aircraftListJson\n                });\n\n              case 5:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function getAircraftList() {\n        return _getAircraftList.apply(this, arguments);\n      }\n\n      return getAircraftList;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var transactionDetails = '';\n\n      if (this.state.transactions.length && this.state.listOfAirports.length && this.state.listOfAircrafts.length) {\n        transactionDetails = this.state.transactions.map(function (item, index) {\n          return /*#__PURE__*/React.createElement(\"tr\", {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 9\n            }\n          }, /*#__PURE__*/React.createElement(\"td\", {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 13\n            }\n          }, index + 1), /*#__PURE__*/React.createElement(\"td\", {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 13\n            }\n          }, item.transaction_date_time), /*#__PURE__*/React.createElement(\"td\", {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 13\n            }\n          }, item.transaction_type), /*#__PURE__*/React.createElement(\"td\", {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 13\n            }\n          }, typeof _this3.state.listOfAirports.filter(function (a) {\n            return a.value == item.airport_id;\n          })[0] != undefined ? _this3.state.listOfAirports.filter(function (a) {\n            return a.value == item.airport_id;\n          })[0].label : ''), /*#__PURE__*/React.createElement(\"td\", {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 13\n            }\n          }, item.transaction_type == \"OUT\" && item.aircraft_id), /*#__PURE__*/React.createElement(\"td\", {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 13\n            }\n          }, item.quantity), /*#__PURE__*/React.createElement(\"td\", {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 13\n            }\n          }, item.transaction_parent_id));\n        });\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mt-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(ToastContainer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-12 col-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-header font-weight-bold\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }\n      }, \"Transactions\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-xs-6 col-sm-6 col-md-6 col-lg-8 mb-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(ToastContainer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.togglePopup.bind(this),\n        className: \"btn btn-info pull-right mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n        icon: faPlus,\n        size: \"sm\",\n        className: \"mr-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }\n      }), \"Add Transaction\"), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.togglePopup.bind(this),\n        className: \"btn btn-info pull-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n        icon: faPlus,\n        size: \"sm\",\n        className: \"mr-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }\n      }), \"Add Reverse Transaction\"), this.state.showPopup ? /*#__PURE__*/React.createElement(TransactionAddModal, {\n        refresh: function refresh() {\n          return _this3.getTransactions();\n        },\n        showPopup: this.state.showPopup,\n        togglePopup: this.togglePopup.bind(this),\n        entityType: this.props.entityType,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 19\n        }\n      }) : null, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-responsive-sm table-striped\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }\n      }, \"Transaction Id\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }\n      }, \"Transaction DateTime\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }\n      }, \"Transaction Type\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }\n      }, \"Airport\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }\n      }, \"Aircraft Id\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }\n      }, \"Quantity\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }\n      }, \"Transaction Id Parent\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 17\n        }\n      }, transactionDetails))))))))), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return TransactionList;\n}(Component);\n\n;\nexport default TransactionList;","map":{"version":3,"sources":["/app/mindfire-assignment/src/views/components/SourceCustomer/User/transactionListing.js"],"names":["React","Component","FontAwesomeIcon","faPlus","faTrash","faPencilAlt","ToastContainer","Alert","PropTypes","TransactionAddModal","AirportAddModal","TransactionList","props","state","transactions","listOfAirports","listOfAircrafts","showPopup","setState","getTransactions","getAirportList","getAircraftList","fetch","then","response","json","data","airportList","airportListJson","map","element","push","label","name","value","id","aircraftList","aircraftListJson","airline","transactionDetails","length","item","index","transaction_date_time","transaction_type","filter","a","airport_id","undefined","aircraft_id","quantity","transaction_parent_id","togglePopup","bind","entityType"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport '../../../../views/modal.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus, faTrash, faPencilAlt } from '@fortawesome/free-solid-svg-icons';\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { Alert } from 'reactstrap';\nimport PropTypes from \"prop-types\";\nimport TransactionAddModal from \"./transactionAddModal\";\nimport AirportAddModal from \"./addAirportModal\";\n\n\nclass TransactionList extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      transactions:[],\n      listOfAirports:[],\n      listOfAircrafts:[],\n      showPopup: false,\n    };\n  }\n\n  togglePopup() {\n    this.setState({\n      showPopup: !this.state.showPopup\n    });\n  }\n\n  async componentDidMount() {\n    await this.getTransactions();\n   await this.getAirportList();\n    await this.getAircraftList();\n  }\n\n  async getTransactions() {\n    await fetch('http://438-ruby-on-rails.code2rock.mindfire-solutions.in/api/v1/transactions').\n    then(response => response.json())\n  .then(data => this.setState({\n    transactions:data\n  }));\n  }\n\n\n     async getAirportList(){\n    let airportList = [];  \n    let airportListJson = []; \n    await fetch('http://438-ruby-on-rails.code2rock.mindfire-solutions.in/api/v1/airports').\n    then(response => response.json())\n     .then(data => \n           data.map(element=>{\n           airportListJson.push({\n            label:element.name,\n            value:element.id\n        })})\n     );\n     this.setState({\n        listOfAirports: airportListJson,\n     })\n  \n   }\n\n   async getAircraftList(){\n    let aircraftList = [];  \n    let aircraftListJson = []; \n    await fetch('http://438-ruby-on-rails.code2rock.mindfire-solutions.in/api/v1/aircrafts').\n    then(response => response.json())\n     .then(data => \n        data.map(element=>{\n        aircraftListJson.push({\n            label:element.airline,\n            value:element.id\n        })\n     })\n     );\n     this.setState({\n        listOfAircrafts: aircraftListJson,\n     })\n  \n   }\n\n  render(){\n    let transactionDetails = ''\n    if (this.state.transactions.length &&this.state.listOfAirports.length && this.state.listOfAircrafts.length) {\n      transactionDetails = this.state.transactions.map((item,index) => (\n        <tr>\n            <td>{index+1}</td> \n            <td>{item.transaction_date_time}</td>\n            <td>{item.transaction_type}</td>\n            <td>{typeof this.state.listOfAirports.filter(a=>a.value== item.airport_id)[0]!=undefined?this.state.listOfAirports.filter(a=>a.value == item.airport_id)[0].label:''}</td>\n            <td>{item.transaction_type==\"OUT\" && item.aircraft_id}</td>\n            <td>{item.quantity}</td>\n            <td>{item.transaction_parent_id}</td>\n        </tr>\n      ))\n    }\n    return (\n    <div className=\"mt-4\">\n        <ToastContainer/>\n        <div className=\"col-sm-12 col-12\">\n          <div className=\"card\">\n            <div className=\"card-header font-weight-bold\">\n               Transactions\n            </div>\n            <div className=\"card-body\">\n              <div className=\"row\">\n                <div className=\"col-xs-6 col-sm-6 col-md-6 col-lg-8 mb-1\">\n                </div>\n                <div className=\"col-12\">\n          <div>\n            <ToastContainer />\n            <div className=\"col-sm-12\">\n            <button onClick={this.togglePopup.bind(this)} className=\"btn btn-info pull-right mb-3\">\n            <FontAwesomeIcon icon={faPlus} size=\"sm\" className=\"mr-1\" />Add Transaction</button>\n            <button onClick={this.togglePopup.bind(this)} className=\"btn btn-info pull-right\">\n            <FontAwesomeIcon icon={faPlus} size=\"sm\" className=\"mr-1\" />Add Reverse Transaction</button>\n              {this.state.showPopup ? \n                  <TransactionAddModal\n                  refresh = {()=>this.getTransactions()}\n                  showPopup={this.state.showPopup}\n                  togglePopup={this.togglePopup.bind(this)}\n                  entityType={this.props.entityType}\n                />\n                : null}\n              <table className=\"table table-responsive-sm table-striped\">\n                <thead>\n                  <tr>\n                    <th>Transaction Id</th>\n                    <th>Transaction DateTime</th>\n                    <th>Transaction Type</th>\n                    <th>Airport</th>\n                    <th>Aircraft Id</th>\n                    <th>Quantity</th>\n                    <th>Transaction Id Parent</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {transactionDetails}\n                </tbody>\n              </table>\n            </div>\n          </div>  \n                </div>   \n              </div>\n            </div>\n          </div>\n        </div>\n        <div>\n        </div>\n      </div>\n    );\n  }\n};\n\n\n\nexport default (TransactionList);"]},"metadata":{},"sourceType":"module"}