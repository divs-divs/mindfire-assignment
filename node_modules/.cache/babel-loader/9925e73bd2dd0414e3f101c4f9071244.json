{"ast":null,"code":"import _objectWithoutProperties from \"/home/divyas/mindfire-assignment-react/react/reactbaserepo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"/home/divyas/mindfire-assignment-react/react/reactbaserepo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/divyas/mindfire-assignment-react/react/reactbaserepo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/divyas/mindfire-assignment-react/react/reactbaserepo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/divyas/mindfire-assignment-react/react/reactbaserepo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/divyas/mindfire-assignment-react/react/reactbaserepo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/divyas/mindfire-assignment-react/react/reactbaserepo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/divyas/mindfire-assignment-react/react/reactbaserepo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/divyas/mindfire-assignment-react/react/reactbaserepo/src/containers/DefaultLayout/DefaultHeader.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router';\nimport { NavLink, Route } from 'react-router-dom';\nimport { Badge, UncontrolledDropdown, DropdownItem, DropdownMenu, DropdownToggle, Nav, NavItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport { AppAsideToggler, AppNavbarBrand, AppSidebarToggler } from '@coreui/react';\nimport profile from '../../assets/img/profile-avatar.png';\nimport AuthenticationService from '../../../src/utils/authentication';\nimport constant from '../.././constants/constant';\nimport HttpTransferService from \"../../../src/utils/httptransfer\";\nimport utils from '../../../src/utils/date';\nimport firebase from '../../../src/firebase';\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport moment from 'moment';\nvar authentication = new AuthenticationService();\nvar httptransfer = new HttpTransferService();\nvar propTypes = {\n  children: PropTypes.node\n};\nvar defaultProps = {};\n\nvar DefaultHeader = /*#__PURE__*/function (_Component) {\n  _inherits(DefaultHeader, _Component);\n\n  var _super = _createSuper(DefaultHeader);\n\n  function DefaultHeader(props) {\n    var _this;\n\n    _classCallCheck(this, DefaultHeader);\n\n    _this = _super.call(this, props);\n\n    _this.getUnReadCountOfNotifications = function () {\n      var notificationCount = 0;\n      var notificationEnqueryJson = {\n        \"status\": [\"UNREAD\"],\n        \"pagination_details\": {\n          \"page_size\": 1,\n          \"page_no\": 1\n        }\n      };\n      httptransfer.enqueryNotification(notificationEnqueryJson, constant.ENTITY_ID).then(function (response) {\n        if (response.status === 200) {\n          if (response.data.notifications.length > 0) {\n            notificationCount = response.data.page_details.total_records;\n          }\n\n          _this.setState({\n            notificationCount: notificationCount\n          });\n        }\n      });\n    };\n\n    _this.getNotifications = function () {\n      _this.getUnReadCountOfNotifications();\n\n      var notificationEnqueryJson = {\n        \"pagination_details\": {\n          \"page_size\": _this.state.pageSize\n        }\n      };\n      _this.state.notificationIds = [];\n      var notificationId = 0;\n      var notificationContent = [];\n      var notificationType = \"\";\n      var totalRecord = 0;\n      var pageSize = _this.state.pageSize;\n      httptransfer.enqueryNotification(notificationEnqueryJson, constant.ENTITY_ID).then(function (response) {\n        if (response.status === 200) {\n          totalRecord = response.data.page_details.total_records;\n\n          for (var i = 0; i < response.data.notifications.length; i++) {\n            notificationType = response.data.notifications[i].body.object_type;\n\n            _this.state.notificationIds.push(response.data.notifications[i].notification_history_id);\n\n            notificationId = response.data.notifications[i].notification_history_id;\n\n            if (response.data.notifications[i].status == constant.UNREAD) {\n              if (response.data.notifications[i].body.object_type == \"TRIP\") {\n                notificationContent.push( /*#__PURE__*/React.createElement(DropdownItem, {\n                  id: notificationId,\n                  name: notificationType,\n                  type: response.data.notifications[i].body.object_type_details.object_type_id,\n                  onClick: function onClick(e) {\n                    return _this.readNotifications(e);\n                  },\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 101,\n                    columnNumber: 42\n                  }\n                }, /*#__PURE__*/React.createElement(\"div\", {\n                  id: notificationId,\n                  name: notificationType,\n                  type: response.data.notifications[i].body.object_type_details.object_type_id,\n                  onClick: function onClick(e) {\n                    return _this.readNotifications(e);\n                  },\n                  className: \"nav-link text-dark\",\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 101,\n                    columnNumber: 222\n                  }\n                }, /*#__PURE__*/React.createElement(\"span\", {\n                  className: \"dot\",\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 101,\n                    columnNumber: 424\n                  }\n                }), response.data.notifications[i].body.message), /*#__PURE__*/React.createElement(\"span\", {\n                  className: \"notificationTime\",\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 101,\n                    columnNumber: 504\n                  }\n                }, /*#__PURE__*/React.createElement(\"i\", {\n                  className: \"fa fa-clock-o mr-2\",\n                  \"aria-hidden\": \"true\",\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 101,\n                    columnNumber: 539\n                  }\n                }), utils.timeAgo(response.data.notifications[i].notification_time))));\n              } else if (response.data.notifications[i].body.object_type == \"DOCUMENT\") {\n                notificationContent.push( /*#__PURE__*/React.createElement(DropdownItem, {\n                  id: notificationId,\n                  name: notificationType,\n                  type: response.data.notifications[i].body.additional_attribute.trip_id,\n                  onClick: function onClick(e) {\n                    return _this.readNotifications(e);\n                  },\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 104,\n                    columnNumber: 42\n                  }\n                }, /*#__PURE__*/React.createElement(\"div\", {\n                  id: notificationId,\n                  name: notificationType,\n                  type: response.data.notifications[i].body.additional_attribute.trip_id,\n                  onClick: function onClick(e) {\n                    return _this.readNotifications(e);\n                  },\n                  className: \"nav-link text-dark\",\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 104,\n                    columnNumber: 215\n                  }\n                }, /*#__PURE__*/React.createElement(\"span\", {\n                  className: \"dot\",\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 104,\n                    columnNumber: 410\n                  }\n                }), response.data.notifications[i].body.message), /*#__PURE__*/React.createElement(\"span\", {\n                  className: \"notificationTime\",\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 104,\n                    columnNumber: 490\n                  }\n                }, /*#__PURE__*/React.createElement(\"i\", {\n                  className: \"fa fa-clock-o mr-2\",\n                  \"aria-hidden\": \"true\",\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 104,\n                    columnNumber: 525\n                  }\n                }), utils.timeAgo(response.data.notifications[i].notification_time))));\n              } else {\n                notificationContent.push( /*#__PURE__*/React.createElement(DropdownItem, {\n                  id: notificationId,\n                  name: notificationType,\n                  onClick: function onClick(e) {\n                    return _this.readNotifications(e);\n                  },\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 107,\n                    columnNumber: 42\n                  }\n                }, /*#__PURE__*/React.createElement(\"div\", {\n                  id: notificationId,\n                  name: notificationType,\n                  onClick: function onClick(e) {\n                    return _this.readNotifications(e);\n                  },\n                  className: \"nav-link text-dark\",\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 107,\n                    columnNumber: 144\n                  }\n                }, /*#__PURE__*/React.createElement(\"span\", {\n                  className: \"dot\",\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 107,\n                    columnNumber: 268\n                  }\n                }), response.data.notifications[i].body.message), /*#__PURE__*/React.createElement(\"span\", {\n                  className: \"notificationTime\",\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 107,\n                    columnNumber: 348\n                  }\n                }, /*#__PURE__*/React.createElement(\"i\", {\n                  className: \"fa fa-clock-o mr-2\",\n                  \"aria-hidden\": \"true\",\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 107,\n                    columnNumber: 383\n                  }\n                }), utils.timeAgo(response.data.notifications[i].notification_time))));\n              }\n            } else {\n              if (response.data.notifications[i].body.object_type == \"TRIP\") {\n                notificationContent.push( /*#__PURE__*/React.createElement(DropdownItem, {\n                  id: notificationId,\n                  name: notificationType,\n                  type: response.data.notifications[i].body.object_type_details.object_type_id,\n                  onClick: function onClick(e) {\n                    return _this.handleRedirection(e);\n                  },\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 112,\n                    columnNumber: 42\n                  }\n                }, /*#__PURE__*/React.createElement(\"div\", {\n                  id: notificationId,\n                  name: notificationType,\n                  type: response.data.notifications[i].body.object_type_details.object_type_id,\n                  onClick: function onClick(e) {\n                    return _this.handleRedirection(e);\n                  },\n                  className: \"nav-link text-dark\",\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 112,\n                    columnNumber: 221\n                  }\n                }, response.data.notifications[i].body.message), /*#__PURE__*/React.createElement(\"span\", {\n                  className: \"notificationTime\",\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 112,\n                    columnNumber: 473\n                  }\n                }, /*#__PURE__*/React.createElement(\"i\", {\n                  className: \"fa fa-clock-o mr-2\",\n                  \"aria-hidden\": \"true\",\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 112,\n                    columnNumber: 508\n                  }\n                }), utils.timeAgo(response.data.notifications[i].notification_time))));\n              } else if (response.data.notifications[i].body.object_type == \"DOCUMENT\") {\n                notificationContent.push( /*#__PURE__*/React.createElement(DropdownItem, {\n                  id: notificationId,\n                  name: notificationType,\n                  type: response.data.notifications[i].body.additional_attribute.trip_id,\n                  onClick: function onClick(e) {\n                    return _this.readNotifications(e);\n                  },\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 115,\n                    columnNumber: 42\n                  }\n                }, /*#__PURE__*/React.createElement(\"div\", {\n                  id: notificationId,\n                  name: notificationType,\n                  type: response.data.notifications[i].body.additional_attribute.trip_id,\n                  onClick: function onClick(e) {\n                    return _this.readNotifications(e);\n                  },\n                  className: \"nav-link text-dark\",\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 115,\n                    columnNumber: 217\n                  }\n                }, response.data.notifications[i].body.message), /*#__PURE__*/React.createElement(\"span\", {\n                  className: \"notificationTime\",\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 115,\n                    columnNumber: 464\n                  }\n                }, /*#__PURE__*/React.createElement(\"i\", {\n                  className: \"fa fa-clock-o mr-2\",\n                  \"aria-hidden\": \"true\",\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 115,\n                    columnNumber: 499\n                  }\n                }), utils.timeAgo(response.data.notifications[i].notification_time))));\n              } else {\n                notificationContent.push( /*#__PURE__*/React.createElement(DropdownItem, {\n                  id: notificationId,\n                  name: notificationType,\n                  onClick: function onClick(e) {\n                    return _this.handleRedirection(e);\n                  },\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 118,\n                    columnNumber: 42\n                  }\n                }, /*#__PURE__*/React.createElement(\"div\", {\n                  id: notificationId,\n                  name: notificationType,\n                  onClick: function onClick(e) {\n                    return _this.handleRedirection(e);\n                  },\n                  className: \"nav-link text-dark\",\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 118,\n                    columnNumber: 144\n                  }\n                }, response.data.notifications[i].body.message), /*#__PURE__*/React.createElement(\"span\", {\n                  className: \"notificationTime\",\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 118,\n                    columnNumber: 320\n                  }\n                }, /*#__PURE__*/React.createElement(\"i\", {\n                  className: \"fa fa-clock-o mr-2\",\n                  \"aria-hidden\": \"true\",\n                  __self: _assertThisInitialized(_this),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 118,\n                    columnNumber: 355\n                  }\n                }), utils.timeAgo(response.data.notifications[i].notification_time))));\n              }\n            }\n          }\n\n          _this.setState({\n            notificationContent: notificationContent,\n            totalRecords: totalRecord,\n            pageSize: pageSize + 10\n          });\n\n          if (pageSize == totalRecord) {\n            _this.setState({\n              hasMoreNotifications: false\n            });\n          }\n        }\n      });\n    };\n\n    _this.readNotifications = _this.readNotifications.bind(_assertThisInitialized(_this));\n    _this.state = {\n      showPopup: false,\n      name: '',\n      notificationCount: 0,\n      notificationContent: [],\n      notificationIds: [],\n      markAllAsRead: false,\n      redirectToDashboard: false,\n      redirectToScustEnquiry: false,\n      redirectToEnquiry: false,\n      redirectToTrip: false,\n      redirectToQuotation: false,\n      redirectToPopUp: false,\n      redirectToMessage: false,\n      redirectToDriverEnrollRequest: false,\n      redirectToEnrolledDriver: false,\n      redirectToDocument: false,\n      tripId: '',\n      pageSize: 10,\n      hasMoreNotifications: true,\n      change_password: false\n    };\n    return _this;\n  }\n\n  _createClass(DefaultHeader, [{\n    key: \"handleReadRedirection\",\n    value: function () {\n      var _handleReadRedirection = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(notificationObject) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(this.state.entityType == constant.SOURCE_CUSTOMER)) {\n                  _context.next = 10;\n                  break;\n                }\n\n                _context.t0 = notificationObject.notification_object_type;\n                _context.next = _context.t0 === 'TRIP' ? 4 : 6;\n                break;\n\n              case 4:\n                this.props.location.history.push(\"/trips/currenttrips/\".concat(notificationObject.notification_trip_id));\n                return _context.abrupt(\"break\", 8);\n\n              case 6:\n                this.props.location.history.push(\"/scustenquiry/currentenquiry\");\n                return _context.abrupt(\"break\", 8);\n\n              case 8:\n                _context.next = 33;\n                break;\n\n              case 10:\n                _context.t1 = notificationObject.notification_object_type;\n                _context.next = _context.t1 === 'SC_ENQUIRY' ? 13 : _context.t1 === 'CT_ENQUIRY' ? 15 : _context.t1 === 'TRIP' ? 17 : _context.t1 === 'CT_QUOTATION' ? 19 : _context.t1 === 'TRANSPORTER_QUOTATION' ? 21 : _context.t1 === 'ENROLLED_DRIVER' ? 23 : _context.t1 === 'DRIVER_ENROLL_REQUEST' ? 25 : _context.t1 === 'MESSAGE' ? 27 : _context.t1 === 'POP_UP' ? 29 : _context.t1 === 'DOCUMENT' ? 31 : 33;\n                break;\n\n              case 13:\n                this.props.location.history.push(\"/enquiries/current\");\n                return _context.abrupt(\"break\", 33);\n\n              case 15:\n                this.props.location.history.push(\"/enquiries/current\");\n                return _context.abrupt(\"break\", 33);\n\n              case 17:\n                this.props.location.history.push(\"/trips/currenttrips/\".concat(notificationObject.notification_trip_id));\n                return _context.abrupt(\"break\", 33);\n\n              case 19:\n                this.props.location.history.push(\"/enquiries/current\");\n                return _context.abrupt(\"break\", 33);\n\n              case 21:\n                this.props.location.history.push(\"/enquiries/current\");\n                return _context.abrupt(\"break\", 33);\n\n              case 23:\n                this.props.location.history.push(\"/drivers/enroll\");\n                return _context.abrupt(\"break\", 33);\n\n              case 25:\n                this.props.location.history.push(\"/drivers/pendingenroll\");\n                return _context.abrupt(\"break\", 33);\n\n              case 27:\n                this.props.location.history.push(\"/dashboard\");\n                return _context.abrupt(\"break\", 33);\n\n              case 29:\n                this.props.location.history.push(\"/dashboard\");\n                return _context.abrupt(\"break\", 33);\n\n              case 31:\n                this.props.location.history.push(\"/trips/currenttrips/\".concat(notificationObject.notification_trip_id));\n                return _context.abrupt(\"break\", 33);\n\n              case 33:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function handleReadRedirection(_x) {\n        return _handleReadRedirection.apply(this, arguments);\n      }\n\n      return handleReadRedirection;\n    }()\n  }, {\n    key: \"readNotifications\",\n    value: function () {\n      var _readNotifications = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(notificationObject) {\n        var _this2 = this;\n\n        var notificationobject, userDetails, notificationHistoryIds, userId, notificationStatusJson;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                notificationobject = {\n                  \"notification_history_id\": notificationObject.target.getAttribute('id'),\n                  \"notification_object_type\": notificationObject.target.getAttribute('name'),\n                  \"notification_trip_id\": notificationObject.target.getAttribute('type')\n                };\n                userDetails = authentication.getUserInfo();\n                notificationHistoryIds = [];\n                notificationHistoryIds.push(notificationObject.target.id);\n                userId = JSON.parse(userDetails).user_id;\n                notificationStatusJson = {\n                  \"notification_history_id\": notificationHistoryIds,\n                  \"status\": \"READ\"\n                };\n                _context2.next = 8;\n                return httptransfer.readNotification(notificationStatusJson, constant.ENTITY_ID, userId).then(function (response) {\n                  if (response.status === 200) {\n                    _this2.setState({\n                      notificationCount: _this2.state.notificationCount - 1\n                    });\n\n                    _this2.getNotifications();\n\n                    _this2.handleReadRedirection(notificationobject);\n                  }\n                });\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function readNotifications(_x2) {\n        return _readNotifications.apply(this, arguments);\n      }\n\n      return readNotifications;\n    }()\n  }, {\n    key: \"readAllNotifications\",\n    value: function readAllNotifications() {\n      var _this3 = this;\n\n      this.setState({\n        markAllAsRead: true\n      });\n      var userDetails = authentication.getUserInfo();\n      var userId = JSON.parse(userDetails).user_id;\n      var notificationStatusJson = {\n        \"status\": \"READ\",\n        \"notification_time\": {\n          \"to\": new Date().getTime()\n        }\n      };\n      httptransfer.readNotification(notificationStatusJson, constant.ENTITY_ID, userId).then(function (response) {\n        if (response.status === 200) {\n          _this3.setState({\n            notificationCount: 0,\n            redirectToDashboard: false\n          });\n\n          _this3.getNotifications();\n        }\n      });\n    }\n  }, {\n    key: \"handleRedirection\",\n    value: function handleRedirection(notificationtype) {\n      var notificationType = notificationtype.target.getAttribute('name');\n\n      if (this.state.entityType == constant.SOURCE_CUSTOMER) {\n        switch (notificationType) {\n          case 'TRIP':\n            this.props.location.history.push(\"/trips/currenttrips/\".concat(notificationtype.target.getAttribute('type')));\n            break;\n\n          default:\n            this.props.location.history.push(\"/scustenquiry/currentenquiry\");\n            break;\n        }\n      } else {\n        switch (notificationType) {\n          case 'SC_ENQUIRY':\n            this.props.location.history.push(\"/enquiries/current\");\n            break;\n\n          case 'CT_ENQUIRY':\n            this.props.location.history.push(\"/enquiries/current\");\n            break;\n\n          case 'TRIP':\n            this.props.location.history.push(\"/trips/currenttrips/\".concat(notificationtype.target.getAttribute('type')));\n            break;\n\n          case 'CT_QUOTATION':\n            this.props.location.history.push(\"/enquiries/current\");\n            break;\n\n          case 'TRANSPORTER_QUOTATION':\n            this.props.location.history.push(\"/enquiries/current\");\n            break;\n\n          case 'ENROLLED_DRIVER':\n            this.props.location.history.push(\"/drivers/enroll'\");\n            break;\n\n          case 'DRIVER_ENROLL_REQUEST':\n            this.props.location.history.push(\"/drivers/pendingenroll\");\n            break;\n\n          case 'MESSAGE':\n            this.props.location.history.push(\"/dashboard\");\n            break;\n\n          case 'POP_UP':\n            this.props.location.history.push(\"/dashboard\");\n            break;\n\n          case 'DOCUMENT':\n            this.props.location.history.push(\"/trips/currenttrips/\".concat(notificationtype.target.getAttribute('type')));\n            break;\n        }\n      }\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this4 = this;\n\n      var messaging = firebase.messaging.isSupported() ? firebase.messaging() : null;\n\n      if (messaging) {\n        messaging.onMessage(function (payload) {\n          _this4.getNotifications();\n        });\n      }\n\n      this.setState({\n        change_password: localStorage.getItem(\"change_password\")\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var userName = authentication.getUserInfo();\n      this.setState({\n        name: \"JSON.parse(userName).first_name.toUpperCase(),\",\n        entityType: \"JSON.parse(userName).entity_type.toUpperCase()\"\n      });\n      this.getNotifications();\n    }\n  }, {\n    key: \"togglePopup\",\n    value: function togglePopup() {\n      this.setState({\n        showPopup: !this.state.showPopup\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var _this$props = this.props,\n          children = _this$props.children,\n          attributes = _objectWithoutProperties(_this$props, [\"children\"]);\n\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 7\n        }\n      }, this.state.change_password == \"false\" && /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 10\n        }\n      }, /*#__PURE__*/React.createElement(AppSidebarToggler, {\n        className: \"d-lg-none\",\n        display: \"md\",\n        mobile: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(AppNavbarBrand, {\n        full: {\n          src: \"hopfirstLogo\",\n          width: 89,\n          height: 40,\n          alt: 'HOPFIRST'\n        },\n        minimized: {\n          src: \"hopfirstLogo\",\n          width: 89,\n          height: 40,\n          alt: 'HOPFIRST'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(AppSidebarToggler, {\n        className: \"d-md-down-none\",\n        display: \"lg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 9\n        }\n      })), /*#__PURE__*/React.createElement(Nav, {\n        className: \"ml-auto\",\n        navbar: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(UncontrolledDropdown, {\n        nav: true,\n        direction: \"down\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(DropdownToggle, {\n        nav: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 13\n        }\n      }, \" \", /*#__PURE__*/React.createElement(\"i\", {\n        className: \"icon-bell\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 20\n        }\n      }), this.state.notificationCount > 0 ? /*#__PURE__*/React.createElement(Badge, {\n        pill: true,\n        color: \"danger\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 83\n        }\n      }, this.state.notificationCount) : '')), /*#__PURE__*/React.createElement(DropdownMenu, {\n        direction: \"down\",\n        className: \"notifications\",\n        id: \"scrollableDiv\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(InfiniteScroll, {\n        dataLength: this.state.notificationContent.length,\n        next: this.getNotifications,\n        hasMore: this.state.hasMoreNotifications,\n        scrollableTarget: \"scrollableDiv\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(DropdownItem, {\n        header: true,\n        tag: \"div\",\n        className: \"text-center notificationsList\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 88\n        }\n      }, \"Notifications\"), this.state.notificationCount > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"checkbox\",\n        checked: this.state.markAllAsRead,\n        className: \"markAll\",\n        onClick: function onClick() {\n          return _this5.readAllNotifications();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 22\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 17\n        }\n      }, \" Mark All as Read\")) : \"\"), this.state.notificationContent))), /*#__PURE__*/React.createElement(UncontrolledDropdown, {\n        nav: true,\n        direction: \"down\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(DropdownToggle, {\n        nav: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: profile,\n        className: \"img-avatar mr-2\",\n        alt: \"profile\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"mr-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 78\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 101\n        }\n      }, this.state.name))), /*#__PURE__*/React.createElement(DropdownMenu, {\n        direction: \"down\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(DropdownItem, {\n        header: true,\n        tag: \"div\",\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 70\n        }\n      }, \"Account\")), /*#__PURE__*/React.createElement(DropdownItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        to: \"/profile\",\n        className: \"nav-link text-dark\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 30\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-user\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 84\n        }\n      }), \" Profile\")), /*#__PURE__*/React.createElement(DropdownItem, {\n        onClick: function onClick(e) {\n          return _this5.props.onLogout(e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-lock\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 67\n        }\n      }), \" Logout\")))));\n    }\n  }]);\n\n  return DefaultHeader;\n}(Component);\n\nDefaultHeader.propTypes = propTypes;\nDefaultHeader.defaultProps = defaultProps;\nexport default DefaultHeader;","map":{"version":3,"sources":["/home/divyas/mindfire-assignment-react/react/reactbaserepo/src/containers/DefaultLayout/DefaultHeader.js"],"names":["React","Component","Redirect","NavLink","Route","Badge","UncontrolledDropdown","DropdownItem","DropdownMenu","DropdownToggle","Nav","NavItem","PropTypes","AppAsideToggler","AppNavbarBrand","AppSidebarToggler","profile","AuthenticationService","constant","HttpTransferService","utils","firebase","InfiniteScroll","moment","authentication","httptransfer","propTypes","children","node","defaultProps","DefaultHeader","props","getUnReadCountOfNotifications","notificationCount","notificationEnqueryJson","enqueryNotification","ENTITY_ID","then","response","status","data","notifications","length","page_details","total_records","setState","getNotifications","state","pageSize","notificationIds","notificationId","notificationContent","notificationType","totalRecord","i","body","object_type","push","notification_history_id","UNREAD","object_type_details","object_type_id","e","readNotifications","message","timeAgo","notification_time","additional_attribute","trip_id","handleRedirection","totalRecords","hasMoreNotifications","bind","showPopup","name","markAllAsRead","redirectToDashboard","redirectToScustEnquiry","redirectToEnquiry","redirectToTrip","redirectToQuotation","redirectToPopUp","redirectToMessage","redirectToDriverEnrollRequest","redirectToEnrolledDriver","redirectToDocument","tripId","change_password","notificationObject","entityType","SOURCE_CUSTOMER","notification_object_type","location","history","notification_trip_id","notificationobject","target","getAttribute","userDetails","getUserInfo","notificationHistoryIds","id","userId","JSON","parse","user_id","notificationStatusJson","readNotification","handleReadRedirection","Date","getTime","notificationtype","messaging","isSupported","onMessage","payload","localStorage","getItem","userName","attributes","src","width","height","alt","readAllNotifications","onLogout"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router';\nimport {  NavLink,Route} from 'react-router-dom';\nimport { Badge, UncontrolledDropdown, DropdownItem, DropdownMenu, DropdownToggle, Nav, NavItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport { AppAsideToggler, AppNavbarBrand, AppSidebarToggler } from '@coreui/react';\nimport profile from '../../assets/img/profile-avatar.png'\nimport AuthenticationService from '../../../src/utils/authentication';\nimport constant from '../.././constants/constant';\nimport HttpTransferService from \"../../../src/utils/httptransfer\";\nimport utils from '../../../src/utils/date'\nimport firebase from '../../../src/firebase';\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport moment from 'moment';\n\nconst  authentication = new AuthenticationService()\nconst httptransfer = new HttpTransferService();\n\n\nconst propTypes = {\n  children: PropTypes.node,\n};\n\nconst defaultProps = {};\n\n\nclass DefaultHeader extends Component {\n  constructor(props) {\n    super(props);\n    this.readNotifications=this.readNotifications.bind(this);\n\n    this.state = {\n        showPopup: false,\n        name : '',\n        notificationCount:0,\n        notificationContent:[],\n        notificationIds:[],\n        markAllAsRead: false,\n        redirectToDashboard: false,\n        redirectToScustEnquiry:false,\n        redirectToEnquiry: false,\n        redirectToTrip: false,\n        redirectToQuotation:false,\n        redirectToPopUp:false,\n        redirectToMessage:false,\n        redirectToDriverEnrollRequest:false,\n        redirectToEnrolledDriver:false,\n        redirectToDocument:false,\n        tripId:'',\n        pageSize:10,\n        hasMoreNotifications:true,\n        change_password:false,\n    }\n}\n\n\n  getUnReadCountOfNotifications = () => {\n    var notificationCount = 0;\n    var notificationEnqueryJson = {\n      \"status\": [\"UNREAD\"],\n      \"pagination_details\":{\t\t\n        \"page_size\": 1,\n        \"page_no\": 1\n    }\n    }\n    httptransfer.enqueryNotification(notificationEnqueryJson, constant.ENTITY_ID)\n      .then(response => {\n        if (response.status === 200) {\n          if (response.data.notifications.length > 0) {\n            notificationCount = response.data.page_details.total_records;\n          }\n          this.setState({\n            notificationCount: notificationCount,\n          })\n        }\n      })\n  }\n\n  getNotifications = () => {\n    this.getUnReadCountOfNotifications();\n    var notificationEnqueryJson = {\n      \"pagination_details\": {\t\t\n        \"page_size\": this.state.pageSize,\n    }}\n    this.state.notificationIds=[];\n    let notificationId = 0;\n    var notificationContent=[];\n    var notificationType=\"\";\n    let totalRecord=0;\n    let pageSize= this.state.pageSize;\n    httptransfer.enqueryNotification(notificationEnqueryJson, constant.ENTITY_ID)\n      .then(response => {\n        if (response.status === 200) {\n          totalRecord=response.data.page_details.total_records\n          for (var i = 0; i < response.data.notifications.length; i++) {\n              notificationType=response.data.notifications[i].body.object_type\n            this.state.notificationIds.push(response.data.notifications[i].notification_history_id);\n            notificationId = response.data.notifications[i].notification_history_id;\n            if (response.data.notifications[i].status == constant.UNREAD) {\n              if (response.data.notifications[i].body.object_type==\"TRIP\") {\n                notificationContent.push(<DropdownItem id={notificationId} name={notificationType} type={response.data.notifications[i].body.object_type_details.object_type_id}  onClick={(e) => this.readNotifications(e)}><div id={notificationId} name={notificationType} type={response.data.notifications[i].body.object_type_details.object_type_id}  onClick={(e) => this.readNotifications(e)} className=\"nav-link text-dark\"><span className=\"dot\"></span>{response.data.notifications[i].body.message}</div><span className=\"notificationTime\"><i className=\"fa fa-clock-o mr-2\" aria-hidden=\"true\"></i>{utils.timeAgo(response.data.notifications[i].notification_time)}</span></DropdownItem>)\n              }\n              else if(response.data.notifications[i].body.object_type==\"DOCUMENT\"){\n                notificationContent.push(<DropdownItem id={notificationId} name={notificationType} type={response.data.notifications[i].body.additional_attribute.trip_id} onClick={(e) => this.readNotifications(e)}><div id={notificationId} name={notificationType} type={response.data.notifications[i].body.additional_attribute.trip_id} onClick={(e) => this.readNotifications(e)} className=\"nav-link text-dark\"><span className=\"dot\"></span>{response.data.notifications[i].body.message}</div><span className=\"notificationTime\"><i className=\"fa fa-clock-o mr-2\" aria-hidden=\"true\"></i>{utils.timeAgo(response.data.notifications[i].notification_time)}</span></DropdownItem>)\n              }\n              else{\n                notificationContent.push(<DropdownItem id={notificationId} name={notificationType}  onClick={(e) => this.readNotifications(e)}><div id={notificationId} name={notificationType}  onClick={(e) => this.readNotifications(e)} className=\"nav-link text-dark\"><span className=\"dot\"></span>{response.data.notifications[i].body.message}</div><span className=\"notificationTime\"><i className=\"fa fa-clock-o mr-2\" aria-hidden=\"true\"></i>{utils.timeAgo(response.data.notifications[i].notification_time)}</span></DropdownItem>)\n              }\n            }\n            else {\n              if (response.data.notifications[i].body.object_type ==\"TRIP\") {\n                notificationContent.push(<DropdownItem id={notificationId} name={notificationType} type={response.data.notifications[i].body.object_type_details.object_type_id} onClick={(e) => this.handleRedirection(e)}><div id={notificationId} name={notificationType} type={response.data.notifications[i].body.object_type_details.object_type_id} onClick={(e) => this.handleRedirection(e)} className=\"nav-link text-dark\">{response.data.notifications[i].body.message}</div><span className=\"notificationTime\"><i className=\"fa fa-clock-o mr-2\" aria-hidden=\"true\"></i>{utils.timeAgo(response.data.notifications[i].notification_time)}</span></DropdownItem>)\n              }\n              else if(response.data.notifications[i].body.object_type==\"DOCUMENT\"){\n                notificationContent.push(<DropdownItem id={notificationId} name={notificationType} type={response.data.notifications[i].body.additional_attribute.trip_id}  onClick={(e) => this.readNotifications(e)} ><div id={notificationId} name={notificationType} type={response.data.notifications[i].body.additional_attribute.trip_id}  onClick={(e) => this.readNotifications(e)} className=\"nav-link text-dark\">{response.data.notifications[i].body.message}</div><span className=\"notificationTime\"><i className=\"fa fa-clock-o mr-2\" aria-hidden=\"true\"></i>{utils.timeAgo(response.data.notifications[i].notification_time)}</span></DropdownItem>)\n              }\n              else{\n                notificationContent.push(<DropdownItem id={notificationId} name={notificationType}  onClick={(e) => this.handleRedirection(e)}><div  id={notificationId} name={notificationType}  onClick={(e) => this.handleRedirection(e)} className=\"nav-link text-dark\">{response.data.notifications[i].body.message}</div><span className=\"notificationTime\"><i className=\"fa fa-clock-o mr-2\" aria-hidden=\"true\"></i>{utils.timeAgo(response.data.notifications[i].notification_time)}</span></DropdownItem>)\n              }\n            }\n        }\n        this.setState({\n          notificationContent:notificationContent,\n          totalRecords:totalRecord,\n          pageSize:pageSize+10\n        })\n        if(pageSize==totalRecord){\n          this.setState({\n            hasMoreNotifications:false\n          })\n        }\n        }\n      })\n  }\n\n async handleReadRedirection(notificationObject){\n    if(this.state.entityType==constant.SOURCE_CUSTOMER){\n      switch (notificationObject.notification_object_type) {\n        case 'TRIP':\n          this.props.location.history.push(`/trips/currenttrips/${notificationObject.notification_trip_id}`);\n          break;\n        default :\n        this.props.location.history.push(\"/scustenquiry/currentenquiry\");\n          break;\n      }\n    }\n    else{\n    switch (notificationObject.notification_object_type) {\n      case 'SC_ENQUIRY':\n        this.props.location.history.push(\"/enquiries/current\");\n        break;\n      case 'CT_ENQUIRY':\n        this.props.location.history.push(\"/enquiries/current\");\n        break;\n      case 'TRIP':\n        this.props.location.history.push(`/trips/currenttrips/${notificationObject.notification_trip_id}`);\n        break;\n      case 'CT_QUOTATION':\n        this.props.location.history.push(\"/enquiries/current\");\n        break;\n      case 'TRANSPORTER_QUOTATION':\n        this.props.location.history.push(\"/enquiries/current\");\n        break;\n      case 'ENROLLED_DRIVER':\n        this.props.location.history.push(\"/drivers/enroll\");\n        break;\n      case 'DRIVER_ENROLL_REQUEST':\n        this.props.location.history.push(\"/drivers/pendingenroll\");\n        break;\n      case 'MESSAGE':\n        this.props.location.history.push(\"/dashboard\");\n        break;\n      case 'POP_UP':\n        this.props.location.history.push(\"/dashboard\");\n        break;\n      case 'DOCUMENT':\n        this.props.location.history.push(`/trips/currenttrips/${notificationObject.notification_trip_id}`);\n        break;\n    }\n  }\n  }\n\n\n async readNotifications(notificationObject){\n    let notificationobject = {\n      \"notification_history_id\" : notificationObject.target.getAttribute('id'),\n      \"notification_object_type\" : notificationObject.target.getAttribute('name'),\n      \"notification_trip_id\" : notificationObject.target.getAttribute('type')\n    }\n    var userDetails = authentication.getUserInfo();\n    var notificationHistoryIds = []\n    notificationHistoryIds.push(notificationObject.target.id)\n    var userId = JSON.parse(userDetails).user_id\n    var notificationStatusJson = {\n      \"notification_history_id\": notificationHistoryIds,\n      \"status\": \"READ\"\n    }\n     await httptransfer.readNotification(notificationStatusJson, constant.ENTITY_ID, userId)\n      .then(response => {\n        if (response.status === 200) {\n          this.setState({\n            notificationCount: this.state.notificationCount - 1,\n          })\n          this.getNotifications();\n          this.handleReadRedirection(notificationobject);\n        }\n      })\n  }\n\n  readAllNotifications() {\n    this.setState({\n      markAllAsRead: true\n    })\n    var userDetails = authentication.getUserInfo();\n    var userId = JSON.parse(userDetails).user_id\n    var notificationStatusJson = {\n      \"status\": \"READ\",\n      \"notification_time\": {\n        \"to\":new Date().getTime(),\t\t\n      },\n    }\n    httptransfer.readNotification(notificationStatusJson, constant.ENTITY_ID, userId)\n      .then(response => {\n        if (response.status === 200) {\n          this.setState({\n            notificationCount: 0,\n            redirectToDashboard:false\n          })\n          this.getNotifications();\n        }\n      })\n  }\n\n   handleRedirection(notificationtype){\n    let notificationType=notificationtype.target.getAttribute('name');\n    if(this.state.entityType==constant.SOURCE_CUSTOMER){\n      switch (notificationType) {\n        case 'TRIP':\n          this.props.location.history.push(`/trips/currenttrips/${notificationtype.target.getAttribute('type')}`);\n          break;\n        default:\n          this.props.location.history.push(\"/scustenquiry/currentenquiry\");\n          break;\n      }\n    }\n    else{\n    switch (notificationType) {\n      case 'SC_ENQUIRY':\n        this.props.location.history.push(\"/enquiries/current\");\n        break;\n      case 'CT_ENQUIRY':\n        this.props.location.history.push(\"/enquiries/current\");\n        break;\n      case 'TRIP':\n        this.props.location.history.push(`/trips/currenttrips/${notificationtype.target.getAttribute('type')}`);\n        break;\n      case 'CT_QUOTATION':\n        this.props.location.history.push(\"/enquiries/current\");\n        break;\n      case 'TRANSPORTER_QUOTATION':\n        this.props.location.history.push(\"/enquiries/current\" );\n        break;\n      case 'ENROLLED_DRIVER':\n        this.props.location.history.push( \"/drivers/enroll'\");\n        break;\n      case 'DRIVER_ENROLL_REQUEST':\n        this.props.location.history.push(\"/drivers/pendingenroll\");\n        break;\n      case 'MESSAGE':\n        this.props.location.history.push(\"/dashboard\" );\n        break;\n      case 'POP_UP':\n        this.props.location.history.push( \"/dashboard\");\n        break;\n      case 'DOCUMENT':\n        this.props.location.history.push( `/trips/currenttrips/${notificationtype.target.getAttribute('type')}`);\n        break;\n    }\n  }\n  }\n\n  componentWillMount() {\n    const messaging = firebase.messaging.isSupported() ? firebase.messaging() : null;\n    if(messaging){\n    messaging.onMessage(payload => {\n      this.getNotifications();\n    })\n  }\n  this.setState({\n    change_password:localStorage.getItem(\"change_password\")\n  })\n  }\n\n  componentDidMount() {\n    var userName = authentication.getUserInfo()\n    this.setState({\n      name: \"JSON.parse(userName).first_name.toUpperCase(),\",\n      entityType:\"JSON.parse(userName).entity_type.toUpperCase()\"\n    })\n    this.getNotifications()\n  }\n\ntogglePopup() {\n  this.setState({\n    showPopup: !this.state.showPopup\n  });\n}\n\n  render() {\n    const { children,...attributes} = this.props;\n    return (\n      <React.Fragment>\n         {this.state.change_password == \"false\" &&\n         <div>\n        <AppSidebarToggler className=\"d-lg-none\" display=\"md\" mobile />\n        <AppNavbarBrand \n                    full={{ src: \"hopfirstLogo\", width: 89, height: 40, alt: 'HOPFIRST' }}\n                    minimized={{ src: \"hopfirstLogo\", width: 89, height: 40, alt: 'HOPFIRST' }}\n                />  \n        <AppSidebarToggler className=\"d-md-down-none\" display=\"lg\" /></div>}\n        <Nav className=\"ml-auto\" navbar>  \n          <UncontrolledDropdown nav direction=\"down\">\n            <DropdownToggle nav>\n            <span> <i className=\"icon-bell\"></i>{this.state.notificationCount>0 ? <Badge pill color=\"danger\">{this.state.notificationCount}</Badge> :''}</span>\n            </DropdownToggle>\n            <DropdownMenu direction=\"down\" className=\"notifications\" id=\"scrollableDiv\">\n            <InfiniteScroll\n            dataLength={this.state.notificationContent.length}\n            next={this.getNotifications}\n            hasMore={this.state.hasMoreNotifications}\n            scrollableTarget=\"scrollableDiv\"\n          >\n              <DropdownItem header tag=\"div\" className=\"text-center notificationsList\"><strong>Notifications</strong>{this.state.notificationCount>0 ?\n                <div><input type=\"checkbox\" checked={this.state.markAllAsRead} className=\"markAll\" onClick={() => this.readAllNotifications()} />\n                <label> Mark All as Read</label></div> :\"\"}\n              </DropdownItem>\n              {this.state.notificationContent}\n              </InfiniteScroll>\n            </DropdownMenu>\n          </UncontrolledDropdown>            \n          <UncontrolledDropdown nav direction=\"down\">\n            <DropdownToggle nav>\n              <img src={profile} className=\"img-avatar mr-2\" alt=\"profile\" /><span className=\"mr-5\"><b>{this.state.name}</b></span>\n            </DropdownToggle>\n            <DropdownMenu direction=\"down\">\n              <DropdownItem header tag=\"div\" className=\"text-center\"><strong>Account</strong></DropdownItem>\n              <DropdownItem ><NavLink to=\"/profile\" className=\"nav-link text-dark\"><i className=\"fa fa-user\"></i> Profile</NavLink></DropdownItem>\n              <DropdownItem onClick={e => this.props.onLogout(e)}><i className=\"fa fa-lock\"></i> Logout</DropdownItem>\n            </DropdownMenu>\n          </UncontrolledDropdown>\n        </Nav>\n        {/* <AppAsideToggler className=\"d-md-down-none\" /> }\n        {/*<AppAsideToggler className=\"d-lg-none\" mobile />*/}\n      </React.Fragment>\n    );\n  }\n}\n\nDefaultHeader.propTypes = propTypes;\nDefaultHeader.defaultProps = defaultProps;\n\nexport default DefaultHeader;\n"]},"metadata":{},"sourceType":"module"}